const f={PRODUCTS:".type-product"},g=(e,t=document)=>{for(const n of e){const o=t.querySelector(n);if(o)return o}return null};function S(e){let t=null;try{const o=Array.from(document.querySelectorAll(f.PRODUCTS));o.length&&(t=o.map(u=>{const d=e.map(c=>{var s;const a=c.selector.split(" "),r=g(a,u);if(r){const m=r.textContent,l=r.currentSrc||((s=window.getComputedStyle(r).backgroundImage.match(/url\(["']?(.*?)["']?\)/))==null?void 0:s[1]),i=r.getAttribute("href"),p={image:l,photo:l,url:i,link:i};return{[c.fieldName]:p[c.fieldName]||m}}return{[c.fieldName]:void 0}});return Object.assign({},...d)}))}catch{console.log("products not found.")}const n={type:"SCRAPED_DATA",payload:t};chrome.runtime.sendMessage(n)}chrome.runtime.onMessage.addListener((e,t,n)=>{e.type==="MANUAL_SCRAPE"&&(S(e.fields),n({status:"Scraping triggered",fields:e.fields}))});
